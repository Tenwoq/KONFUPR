
# Эмулятор командной оболочки Unix-подобной ОС

## 1. Общее описание

Данный проект представляет собой эмулятор командной оболочки Unix-подобной операционной системы (shell). Эмулятор запускается из командной строки и работает в режиме CLI, предоставляя интерфейс для взаимодействия с виртуальной файловой системой. Виртуальная файловая система передается в виде архива формата `zip`, который распаковывается программой. 

Эмулятор поддерживает базовые команды для навигации и взаимодействия с файловой системой (`ls`, `cd`, `exit`), а также дополнительные команды: `history` (отображение истории команд) и `who` (информация о текущем пользователе). Все действия пользователя логируются в файл формата `json`.

## 2. Описание функций и настроек

### Основные функции эмулятора:

- **Инициализация эмулятора**:
  Эмулятор инициализируется путем распаковки виртуальной файловой системы из предоставленного архива и настройки окружения.

- **Команды эмулятора**:
  
  - `ls`: Показывает список файлов и директорий в текущем каталоге.
  - `cd <path>`: Меняет текущий каталог на указанный путь.
  - `exit`: Завершает работу эмулятора.
  - `history`: Показывает историю выполненных команд за сеанс.
  - `who`: Отображает информацию о пользователе, запустившем эмулятор.
  
- **Логирование**:
  Все действия эмулятора записываются в лог-файл формата `json`. Запись лога включает в себя команду и результат ее выполнения.

### Настройки запуска:

Эмулятор принимает два аргумента при запуске:

1. `--fs <path_to_zip>` — Путь к архиву виртуальной файловой системы.
2. `--log <path_to_log>` — Путь к лог-файлу, куда будут записываться действия пользователя.

Пример запуска:
```bash
python shell_emulator.py --fs /path/to/fs.zip --log /path/to/log.json
```

## 3. Описание команд для сборки проекта

Для сборки и запуска проекта необходимо следовать следующим шагам:

1. Убедитесь, что Python установлен (версия 3.7+).
2. Установите зависимости из `requirements.txt`:
   ```bash
   pip install -r requirements.txt
   ```
3. Запустите эмулятор, указав путь к виртуальной файловой системе и лог-файлу:
   ```bash
   python shell_emulator.py --fs /path/to/fs.zip --log /path/to/log.json
   ```

## 4. Примеры использования

Пример работы с эмулятором:

- Команда `ls` для отображения файлов в текущей директории:
  ![Пример команды ls](assets/ls_example.gif)

- Команда `cd` для смены директории:
  ![Пример команды cd](assets/cd_example.gif)

- Команда `history` для отображения истории команд:
  ![Пример команды history](assets/history_example.gif)

- Завершение работы через команду `exit`:
  ![Пример команды exit](assets/exit_example.gif)

## 5. Результаты прогона тестов

Тесты для всех функций и команд эмулятора можно запустить с помощью:
```bash
pytest
```

Тесты покрывают следующие сценарии:

- **Команда `ls`**:
  - Проверка отображения списка файлов в текущей директории.
  - Проверка работы с пустой директорией.
  - Проверка корректной работы при смене директории.

- **Команда `cd`**:
  - Переход в существующую директорию.
  - Попытка перехода в несуществующую директорию.
  - Переход в корневую директорию.

- **Команда `exit`**:
  - Корректное завершение сеанса.

- **Команда `history`**:
  - Проверка записи всех выполненных команд.
  - Проверка отображения истории после завершения сеанса.
  
- **Команда `who`**:
  - Проверка отображения информации о текущем пользователе.

Каждая команда протестирована с тремя различными тестовыми случаями.
